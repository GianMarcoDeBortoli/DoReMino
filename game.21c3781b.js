parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Edc2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.startTimer=m,exports.askToReload=h;const e=283,t=10,n=5,a={info:{color:"green"},warning:{color:"orange",threshold:10},alert:{color:"red",threshold:5}},r=120;let o=0,s=r,i=null,c=a.info.color;function l(){window.removeEventListener("beforeunload",h),clearInterval(i),document.fPlayGame.submit()}function m(){i=setInterval(()=>{o=o+=1,s=r-o,document.getElementById("base-timer-label").innerHTML=d(s),b(),u(s),0===s&&l()},1e3)}function d(e){const t=Math.floor(e/60);let n=e%60;return n<10&&(n="0".concat(n)),"".concat(t,":").concat(n)}function u(e){const{alert:t,warning:n,info:r}=a;e<=t.threshold?(document.getElementById("base-timer-path-remaining").classList.remove(n.color),document.getElementById("base-timer-path-remaining").classList.add(t.color)):e<=n.threshold&&(document.getElementById("base-timer-path-remaining").classList.remove(r.color),document.getElementById("base-timer-path-remaining").classList.add(n.color))}function g(){const e=s/r;return e-1/r*(1-e)}function b(){const t="".concat((g()*e).toFixed(0)," 283");document.getElementById("base-timer-path-remaining").setAttribute("stroke-dasharray",t)}function h(e){e.preventDefault(),e.returnValue=""}document.getElementById("timer").innerHTML='\n<div class="base-timer">\n  <svg class="base-timer__svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n    <g class="base-timer__circle">\n      <circle class="base-timer__path-elapsed" cx="50" cy="50" r="45"></circle>\n      <path\n        id="base-timer-path-remaining"\n        stroke-dasharray="283"\n        class="base-timer__path-remaining '.concat(c,'"\n        d="\n          M 50, 50\n          m -45, 0\n          a 45,45 0 1,0 90,0\n          a 45,45 0 1,0 -90,0\n        "\n      ></path>\n    </g>\n  </svg>\n  <span id="base-timer-label" class="base-timer__label">').concat(d(s),"</span>\n</div>\n"),window.addEventListener("beforeunload",h);
},{}],"QI2D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.playChordsOnHeader=s,exports.playNoteOnHeader=l,exports.playPluck=i,exports.playMembrane=c,exports.errorSound=g,exports.changeSetSound=u,exports.play_melody=p,exports.searchForNote=exports.synth=void 0;const e=(new Tone.Synth).toDestination();exports.synth=e;const t=(new Tone.PolySynth).toDestination(),n=(new Tone.PluckSynth).toDestination(),o=(new Tone.MembraneSynth).toDestination(),r=(new Tone.MetalSynth).toDestination();n.volume.value=-12,o.volume.value=-12,r.volume.value=-12;const a=[[-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11,12],["F#3","G3","G#3","A3","A#3","B3","C4","C#4","D4","D#4","E4","F4","F#4","G4","G#4","A4","A#4","B4","C5"]];function s(n){0==n?t.triggerAttackRelease(["C4","G4"],"8n"):1==n?t.triggerAttackRelease(["D4","F4"],"8n"):2==n?t.triggerAttackRelease(["B3","E4","G4"],"8n"):3==n&&e.triggerAttackRelease("C4","4n")}function l(t){0==t?e.triggerAttackRelease("C4","8n"):1==t?e.triggerAttackRelease("D4","8n"):2==t&&e.triggerAttackRelease("E4","8n")}function i(){n.triggerAttackRelease("C5","16n")}function c(){o.triggerAttackRelease("C4","16n")}function g(){r.triggerAttackRelease("C5","32n")}function u(){let e=setInterval(function(){n.triggerAttackRelease("C6","32n")},40);setTimeout(function(){clearInterval(e)},300)}function p(t){let n=0;const o=Tone.now();for(let r=0;r<t.length;r++){let s=t[r],l=a[0].indexOf(s),i=a[1][l];e.triggerAttackRelease(i,"8n",o+n),n+=.5}}exports.searchForNote=a;
},{}],"jYPr":[function(require,module,exports) {
"use strict";function e(e,t,l){for(let d=0;d<t;d++){let t=document.createElement("div");t.classList.add("row"),t.id="row"+d,t.style.height=l+"px",t.style.flexFlow=d%2==0?"row wrap":"row-reverse wrap",e.appendChild(t)}}function t(e,t,l){e.classList.add("box"),e.style.width=l+"px",e.style.height=t+"px"}function l(e,t,l){e.classList.add("box"),e.style.width=t+"px",e.style.height=l+"px"}function d(e,d,i,n){let o=0;for(let s=0;s<e;s++){let e=document.getElementById("row"+s);for(let l=0;l<d-1;l++){let l=document.createElement("div");t(l,i,n),l.textContent=o,l.id=o,o++,e.appendChild(l)}let r=document.createElement("div");l(r,i,n),r.textContent=o,r.id=o,o++,e.appendChild(r)}}function i(t,l,i,n,o,s,r,p){t.style.width=l+"px",t.style.height=i+"px",e(t,n,o),d(n,s,r,p)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.draw_table=i;
},{}],"hOEn":[function(require,module,exports) {
"use strict";function t(t){var e=t.length;return Math.abs(t[e-2]-t[e-1])>9&&Math.sign(t[e-2]-t[e-1])==Math.sign(t[e-1]-t[e])?1:0}function e(t){var e=0;for(let n=1;n<t.length;n++)Math.abs(t[n-1]-t[n])<3&&e++;return e}function n(t){var e=0;for(let n=1;n<t.length;n++)Math.abs(t[n-1]-t[n])>2&&e++;return e}function r(t){return Math.abs(t[t.length-2]-t[t.length-1])>12?1:0}function o(t){var e=0;for(let n=1;n<t.length;n++)e+=Math.abs(t[n-1]-t[n]);return e/(t.length-1)}function i(t){var e=0;for(let n=1;n<t.length-1;n++)Math.abs(t[n-1]-t[n])>12&&e++;return e}function a(t){var e=0;for(let n=2;n<t.length;n++)Math.abs(t[n-2]-t[n-1])>9&&Math.sign(t[n-2]-t[n-1])==Math.sign(t[n-1]-t[n-0])&&e++;return e}function s(t){return 0==t[0]?0:1}function u(t){return 0==t[t.length-1]?0:1}function f(t){let e=0;for(let r=0;r<t.length;r++){var n;for(n=0;n<r&&t[r]!=t[n];n++);r==n&&(e+=1)}return e}function l(t){var e=t.length;if(!(e<3)){var n=[];for(let o=1;o<e-1;o++){var r;t[o-1]<t[o]?r=10:t[o-1]==t[o]?r=20:t[o-1]>t[o]&&(r=30),t[o]<t[o+1]?r+=1:t[o]==t[o+1]?r+=2:t[o]>t[o+1]&&(r+=3),n[o-1]=r}return n}}function h(t){var e=0;if(void 0!==t&&t.length)for(let n=1;n<t.length;n++)t[n-1]!=t[n]||11!=t[n-1]&&22!=t[n-1]&&33!=t[n-1]||e++;return e}function g(t){var e=0;if(void 0!==t&&t.length){for(let n=1;n<t.length-1;n++)t[n-1]==t[n+1]&&e++;for(let n=1;n<t.length-2;n++)t[n-1]==t[n+2]&&e++}return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.sameDirectionLastLeap=t,exports.neighbourNotes=e,exports.notNeighbourNotes=n,exports.tooWideLastLeap=r,exports.meanOfDistances=o,exports.tooWideLeaps=i,exports.sameDirectionLeaps=a,exports.beginOnTonic=s,exports.endOnTonic=u,exports.differentNotes=f,exports.findContour=l,exports.oneDirectionContour=h,exports.multiDirectionContour=g;
},{}],"QcRT":[function(require,module,exports) {
"use strict";var e=l(require("./modules/timer")),t=require("./modules/sound"),r=require("./modules/table"),n=require("./modules/melodyEvaluator");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if("default"!==d&&Object.prototype.hasOwnProperty.call(e,d)){var i=l?Object.getOwnPropertyDescriptor(e,d):null;i&&(i.get||i.set)?Object.defineProperty(n,d,i):n[d]=e[d]}return n.default=e,r&&r.set(e,n),n}const d=10;var i=[],o=[],g=[],c=[],s=-1;const u=["rgb(255, 104, 222)","rgb(60, 116, 9)","rgb(123, 180, 255)","rgb(114, 67, 13)","rgb(217, 164, 4)","rgb(128, 21, 228)","rgb(165, 29, 54)","rgb(255, 115, 0)","rgb(0, 4, 255)","rgb(207, 178, 143)","rgb(242, 242, 242)","rgb(93, 93, 107)","rgb(255, 163, 235)","rgb(106, 206, 13)","rgb(181, 214, 255)","rgb(201, 115, 17)","rgb(242, 205, 19)","rgb(184, 109, 255)","rgb(217, 72, 98)"];var f=6;const p=document.getElementById("bar");var v=[],h=document.createElement("input");h.setAttribute("type","hidden"),h.setAttribute("name","result"),document.getElementById("fPlayGame").appendChild(h);const m=8,b=60,y=120,T=5,N=3,E=y+10,L=m*y+5*(m-1)+20,C=N*E,x=document.getElementById("table"),k=document.getElementById("copySpace");function w(){let e=[],t=new URLSearchParams(document.location.search.substring(1)),r=t.get("mode"),n=t.get("difficulty");return e[0]=r,e[1]=n,e}var O=w(),_=O[0],A=O[1];switch(_){case"Ionian":i=[-5,-3,-1,0,2,4,5,7,9,11,12];break;case"Dorian":i=[-5,-3,-2,0,2,3,5,7,9,10,12];break;case"Phrygian":i=[-6,-4,-2,-0,1,3,5,7,8,10,12];break;case"Lydian":i=[-5,-3,-1,0,2,4,6,7,9,11,12];case"Myxolydian":i=[-5,-3,-2,0,2,4,5,7,9,10,12];case"Aeolian":i=[-5,-4,-2,0,2,3,5,7,8,10,12];case"Locrian":i=[-6,-4,-2,0,1,3,5,6,8,10,12]}function F(e,t,r){let n=document.createElement("div");n.classList.add("tile_v"),n.id=r,n.setAttribute("draggable",!0),n.addEventListener("dragstart",function(){s=U(event)});const a=document.createElement("div");a.classList.add("tileUpper"),"expert"==A?a.style.backgroundColor="#FFF4E9":"normal"==A&&(a.style.backgroundColor=e),a.addEventListener("click",P);const l=document.createElement("div");return l.classList.add("tileLower"),"expert"==A?l.style.backgroundColor="#FFF4E9":"normal"==A&&(l.style.backgroundColor=t),l.addEventListener("click",S),n.appendChild(a),n.appendChild(l),n.addEventListener("dblclick",I),n}function D(){for(let e=0;e<d;e++){let t=Math.floor(Math.random()*i.length),r=i[t],n=u[r+f],a=Math.floor(Math.random()*i.length),l=i[a];const d=F(n,u[l+f],e);p.appendChild(d);let g={tile:d,grade1:r,grade2:l,angle:0};o.push(g)}}function M(){D(),(0,r.draw_table)(x,L,C,N,E,m,b,y)}function R(e){return e+=90,e%=360}function I(e){let t=Array.from(e.currentTarget.parentNode.children).indexOf(e.currentTarget);if(0==o[t].angle){e.currentTarget.classList.remove("tile_v"),e.currentTarget.classList.add("tile_h"),e.currentTarget.style.flexFlow="row-reverse wrap";let r=o[t].grade1;o[t].grade1=o[t].grade2,o[t].grade2=r}if(90==o[t].angle&&(e.currentTarget.classList.remove("tile_h"),e.currentTarget.classList.add("tile_v"),e.currentTarget.style.flexFlow="column-reverse wrap"),180==o[t].angle){e.currentTarget.classList.remove("tile_v"),e.currentTarget.classList.add("tile_h"),e.currentTarget.style.flexFlow="row wrap";let r=o[t].grade1;o[t].grade1=o[t].grade2,o[t].grade2=r}270==o[t].angle&&(e.currentTarget.classList.remove("tile_h"),e.currentTarget.classList.add("tile_v"),e.currentTarget.style.flexFlow="column wrap"),o[t].angle=R(o[t].angle)}function j(e){if(0==c[0].angle){e.currentTarget.classList.remove("tile_v"),e.currentTarget.classList.add("tile_h"),e.currentTarget.style.flexFlow="row-reverse wrap";let t=c[0].grade1;c[0].grade1=c[0].grade2,c[0].grade2=t}if(90==c[0].angle&&(e.currentTarget.classList.remove("tile_h"),e.currentTarget.classList.add("tile_v"),e.currentTarget.style.flexFlow="column-reverse wrap"),180==c[0].angle){e.currentTarget.classList.remove("tile_v"),e.currentTarget.classList.add("tile_h"),e.currentTarget.style.flexFlow="row wrap";let t=c[0].grade1;c[0].grade1=c[0].grade2,c[0].grade2=t}270==c[0].angle&&(e.currentTarget.classList.remove("tile_h"),e.currentTarget.classList.add("tile_v"),e.currentTarget.style.flexFlow="column wrap"),c[0].angle=R(c[0].angle)}function B(){(0,t.changeSetSound)();for(let e=0;e<o.length;e++)p.removeChild(o[e].tile);o=[],D()}function P(){if(event.shiftKey){let e;if("bar"===event.currentTarget.parentNode.parentNode.id){let t=o[Array.from(event.currentTarget.parentNode.parentNode.children).indexOf(event.currentTarget.parentNode)].angle;0==t||270==t?e=o[Array.from(event.currentTarget.parentNode.parentNode.children).indexOf(event.currentTarget.parentNode)].grade1:90!=t&&180!=t||(e=o[Array.from(event.currentTarget.parentNode.parentNode.children).indexOf(event.currentTarget.parentNode)].grade2)}else if("table"===event.currentTarget.parentNode.parentNode.parentNode.parentNode.id){let t=g[W.indexOf(event.currentTarget.parentNode.parentNode)].angle;0==t||270==t?e=g[W.indexOf(event.currentTarget.parentNode.parentNode)].grade1:90!=t&&180!=t||(e=g[W.indexOf(event.currentTarget.parentNode.parentNode)].grade2)}else if("copySpace"===event.currentTarget.parentNode.parentNode.id){let t=c[0].angle;0==t||270==t?e=c[0].grade1:90!=t&&180!=t||(e=c[0].grade2)}let r=t.searchForNote[0].indexOf(e),n=t.searchForNote[1][r];t.synth.triggerAttackRelease(n,"8n")}}function S(){if(event.shiftKey){let e;if("bar"===event.currentTarget.parentNode.parentNode.id){let t=o[Array.from(event.currentTarget.parentNode.parentNode.children).indexOf(event.currentTarget.parentNode)].angle;0==t||270==t?e=o[Array.from(event.currentTarget.parentNode.parentNode.children).indexOf(event.currentTarget.parentNode)].grade2:90!=t&&180!=t||(e=o[Array.from(event.currentTarget.parentNode.parentNode.children).indexOf(event.currentTarget.parentNode)].grade1)}else if("table"===event.currentTarget.parentNode.parentNode.parentNode.parentNode.id){let t=g[W.indexOf(event.currentTarget.parentNode.parentNode)].angle;0==t||270==t?e=g[W.indexOf(event.currentTarget.parentNode.parentNode)].grade2:90!=t&&180!=t||(e=g[W.indexOf(event.currentTarget.parentNode.parentNode)].grade1)}else if("copySpace"===event.currentTarget.parentNode.parentNode.id){let t=c[0].angle;0==t||270==t?e=c[0].grade2:90!=t&&180!=t||(e=c[0].grade1)}let r=t.searchForNote[0].indexOf(e),n=t.searchForNote[1][r];t.synth.triggerAttackRelease(n,"8n")}}M(),changeSet.onclick=B,document.getElementById("finishGame").onclick=function(){window.removeEventListener("beforeunload",askToReload)},playMelody.onclick=function(){(0,t.play_melody)(v)},playTonic.addEventListener("click",function(){t.synth.triggerAttackRelease("C4","8n")});let q=document.getElementById("table").children,W=[];for(let X=0;X<N;X++){let e=q[X].children;for(let t=0;t<m;t++)W.push(e[t])}function K(e){e.preventDefault()}function U(e){if(e.dataTransfer.setData("text",e.target.id),"11"==e.target.id)return 11;if("11"!=e.target.id){return Array.from(e.currentTarget.parentNode.children).indexOf(e.currentTarget)}}function G(e){let t=0;for(;e[t];){if(e[t-1]&&e[t-1].children[0].setAttribute("draggable",!1),0==e[t].children.length){e[t].addEventListener("drop",z),e[t].addEventListener("dragover",K);break}t++}}function z(e){if(0===e.target.children.length)if(11==s)if(e.target.style.width!=y+"px"||90!=c[0].angle&&270!=c[0].angle)if(e.target.style.width!=b+"px"||0!=c[0].angle&&180!=c[0].angle)Q("Remember you can rotate the tile!");else if(v[v.length-1]!=c[0].grade1)Q("Remember to match the color!");else{e.target.textContent="",e.preventDefault();t=e.dataTransfer.getData("text");e.target.appendChild(c[0].tile),J(c[0].grade1,c[0].grade2,1),g.push(c.pop()),e.target.firstElementChild.removeEventListener("dblclick",j),e.target.removeEventListener("drop",z),e.target.removeEventListener("dragover",K),e.target.firstElementChild.addEventListener("click",H),e.target.firstElementChild.removeAttribute("id"),k.removeChild,G(W)}else if(Math.floor(e.target.id/m)%2==0&&0!=v.length&&v[v.length-1]!=c[0].grade1)Q("Remember to match the color!");else if(Math.floor(e.target.id/m)%2!=0&&0!=v.length&&v[v.length-1]!=c[0].grade2)Q("Remember to match the color!");else{e.target.textContent="",e.preventDefault();var t=e.dataTransfer.getData("text");e.target.appendChild(c[0].tile),J(c[0].grade1,c[0].grade2,e.target.id),g.push(c.pop()),e.target.firstElementChild.removeEventListener("dblclick",j),e.target.removeEventListener("drop",z),e.target.removeEventListener("dragover",K),e.target.firstElementChild.addEventListener("click",H),e.target.firstElementChild.removeAttribute("id"),k.removeChild,G(W)}else if(e.target.style.width!=y+"px"||90!=o[s].angle&&270!=o[s].angle)if(e.target.style.width!=b+"px"||0!=o[s].angle&&180!=o[s].angle)Q("Remember you can rotate the tile!");else if(v[v.length-1]!=o[s].grade1)Q("Remember to match the color!");else{e.target.textContent="",e.preventDefault();t=e.dataTransfer.getData("text");e.target.appendChild(document.getElementById(t)),J(o[s].grade1,o[s].grade2,1),g.push(o.splice(s,1)[0]),e.target.firstElementChild.removeEventListener("dblclick",I),e.target.removeEventListener("drop",z),e.target.removeEventListener("dragover",K),e.target.firstElementChild.addEventListener("click",H),e.target.firstElementChild.removeAttribute("id"),G(W)}else if(Math.floor(e.target.id/m)%2==0&&0!=v.length&&v[v.length-1]!=o[s].grade1)Q("Remember to match the color!");else if(Math.floor(e.target.id/m)%2!=0&&0!=v.length&&v[v.length-1]!=o[s].grade2)Q("Remember to match the color!");else{e.target.textContent="",e.preventDefault();var t=e.dataTransfer.getData("text");e.target.appendChild(document.getElementById(t)),J(o[s].grade1,o[s].grade2,e.target.id),g.push(o.splice(s,1)[0]),e.target.firstElementChild.removeEventListener("dblclick",I),e.target.removeEventListener("drop",z),e.target.removeEventListener("dragover",K),e.target.firstElementChild.addEventListener("click",H),e.target.firstElementChild.removeAttribute("id"),G(W)}}function H(){if(event.altKey&&0==k.children.length){if(90==g[event.currentTarget.parentNode.id].angle||180==g[event.currentTarget.parentNode.id].angle)var e=g[event.currentTarget.parentNode.id].tile.lastElementChild.style.backgroundColor,t=g[event.currentTarget.parentNode.id].tile.firstElementChild.style.backgroundColor;else if(0==g[event.currentTarget.parentNode.id].angle||270==g[event.currentTarget.parentNode.id].angle)e=g[event.currentTarget.parentNode.id].tile.firstElementChild.style.backgroundColor,t=g[event.currentTarget.parentNode.id].tile.lastElementChild.style.backgroundColor;let r=F(e,t,11);r.removeEventListener("dblclick",I),r.addEventListener("dblclick",j),r.addEventListener("dragstart",function(){s=U(event)}),k.appendChild(r);let n={tile:r,grade1:g[event.currentTarget.parentNode.id].grade1,grade2:g[event.currentTarget.parentNode.id].grade2,angle:0};c.push(n)}}function J(e,t,r){0==r?v.push(e,t):Math.floor(r/m)%2==0?v.push(t):v.push(e),h.setAttribute("value",v.join("_")),V(v)}function Q(e){(0,t.errorSound)();let r=document.getElementById("cartoon");r.style.visibility="visible",r.textContent=e,setTimeout(function(){r.style.visibility="hidden"},2e3)}function V(e){let t=e.length;1==(0,n.tooWideLastLeap)(e)&&Q("Try to avoid big jumps!"),t>3&&0!=(0,n.sameDirectionLastLeap)(e)&&Q("Try to change direction after a big jump!"),t>3&&0==(0,n.meanOfDistances)(e)?Q("Do not only use one note!"):t>3&&(0,n.neighbourNotes)(e)>3*(0,n.notNeighbourNotes)(e)&&Q("Do not overuse neigbour notes!"),t>3&&(0,n.notNeighbourNotes)(e)>3*(0,n.neighbourNotes)(e)&&Q("Use more neighbour notes!")}G(W),e.startTimer();
},{"./modules/timer":"Edc2","./modules/sound":"QI2D","./modules/table":"jYPr","./modules/melodyEvaluator":"hOEn"}]},{},["QcRT"], null)
//# sourceMappingURL=/DoReMino/game.21c3781b.js.map